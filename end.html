<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Countdown</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="flash">
  <div class="app-fake">
    <h1>⏳ Countdown</h1>
    <p>Você morrerá em:</p>
    <div id="deathTimer" class="timer"></div>
    <p id="premonition" class="premonition"></p>
    <button id="cancelBtn" onclick="tentarCancelar()">Tentar cancelar</button>
    <p id="cancelMessage" class="cancel-message" style="display:none;"></p>
  </div>

  <script>
    window.onbeforeunload = function () {
      return "Você não pode sair agora. O tempo está correndo.";
    };

    function gerarTempoAleatorio() {
      const dias = Math.floor(Math.random() * 10) + 1;
      const horas = Math.floor(Math.random() * 24);
      const minutos = Math.floor(Math.random() * 60);
      const segundos = Math.floor(Math.random() * 60);

      return (
        (dias * 24 * 60 * 60) +
        (horas * 60 * 60) +
        (minutos * 60) +
        segundos
      );
    }

    function formatarTempo(segundosTotais) {
      const dias = Math.floor(segundosTotais / (24 * 60 * 60));
      segundosTotais %= (24 * 60 * 60);
      const horas = Math.floor(segundosTotais / (60 * 60));
      segundosTotais %= (60 * 60);
      const minutos = Math.floor(segundosTotais / 60);
      const segundos = segundosTotais % 60;

      return `${dias}d ${horas}h ${minutos}min ${segundos}s`;
    }

    function iniciarContagem(segundos) {
      const timerEl = document.getElementById("deathTimer");

      setInterval(() => {
        timerEl.textContent = formatarTempo(segundos);
        segundos--;
      }, 1000);
    }

    function gerarPremonicao() {
      const mensagens = [
        "Cuidado com o sinal verde.",
        "Preste atenção no chuveiro.",
        "A buzina pode ser o último som que você ouvirá.",
        "Evite escadas hoje.",
        "Não confie no travesseiro.",
        "O cheiro de gás não é coincidência.",
        "A porta do elevador pode não abrir.",
        "O reflexo no espelho não é seu.",
        "Você vai ouvir meu nome antes de dormir.",
        "O último gole pode ser o mais perigoso.",
        "A luz do seu quarto acabou de piscar, não foi?",
        "Você está sendo observado enquanto lê isso."
      ];

      const aleatoria = mensagens[Math.floor(Math.random() * mensagens.length)];
      document.getElementById("premonition").textContent = aleatoria;
    }

    function tentarCancelar() {
      const btn = document.getElementById("cancelBtn");
      const msg = document.getElementById("cancelMessage");

      btn.style.display = "none";
      msg.textContent = "⛔ Cancelamento negado. O destino já foi selado.";
      msg.style.display = "block";
      document.body.classList.add("flash-intensa");
    }

    window.onload = () => {
      const tempoInicial = gerarTempoAleatorio();
      iniciarContagem(tempoInicial);
      gerarPremonicao();
    };
  </script>
</body>
</html>
