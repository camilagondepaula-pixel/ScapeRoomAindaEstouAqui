<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Você quer sair?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Tela inicial -->
  <div class="container" id="dialogue">
    <p id="message"></p>
    <button id="exitBtn" onclick="mostrarProximaFrase()" style="display:none;">Sair</button>
  </div>

  <!-- Tela de alerta -->
  <div class="alerta" id="alerta" style="display: none;">
    <h1 id="alertTitle"></h1>
    <p id="alertText"></p>
  </div>

  <!-- Cena do susto -->
  <div class="scare" id="scare" style="display: none;">
    <img src="assets/img/personagem-assustador.jpg" alt="Susto" />
    <audio id="screamSound">
      <source src="assets/audio/scary-scream-3-81274.mp3" type="audio/mpeg">
    </audio>
  </div>

  <script>
    let index = 0;
    let playerName = "";
    let frases = [];

    // Função de digitação
    function typeWriter(text, elementId, callback, speed = 50) {
      let i = 0;
      document.getElementById(elementId).innerHTML = "";
      function typing() {
        if (i < text.length) {
          document.getElementById(elementId).innerHTML += text.charAt(i);
          i++;
          setTimeout(typing, speed);
        } else if (callback) {
          callback();
        }
      }
      typing();
    }

    // Mostra próxima frase
    function mostrarProximaFrase() {
      if (index < frases.length) {
        document.getElementById("exitBtn").style.display = "none";
        typeWriter(frases[index], "message", () => {
          document.getElementById("exitBtn").style.display = "inline-block";
        });
        index++;
      } else {
        showAlert();
      }
    }

    // Mostra alerta de vírus
    function showAlert() {
      document.getElementById("dialogue").style.display = "none";
      document.getElementById("alerta").style.display = "block";
      document.body.classList.add("flash");

      if (navigator.vibrate) {
        navigator.vibrate([300, 200, 300, 200, 500]);
      }

      typeWriter("⚠️ Alerta de Vírus ⚠️", "alertTitle", () => {
        typeWriter("Seu celular pode estar sendo rastreado ou invadido", "alertText", () => {
          setTimeout(showScare, 3000);
        }, 40);
      }, 40);
    }

    // Mostra o susto
    function showScare() {
      document.getElementById("alerta").style.display = "none";
      document.getElementById("scare").style.display = "block";
      document.body.classList.remove("flash");

      const sound = document.getElementById("screamSound");
      sound.currentTime = 0;
      sound.play().catch(err => {
        console.log("Som bloqueado até interação do usuário:", err);
      });
    }

    // Timer para susto automático
    let scareTimeout = setTimeout(showAlert, 15000);
    function resetTimer() {
      clearTimeout(scareTimeout);
      scareTimeout = setTimeout(showAlert, 15000);
    }

    window.onload = () => {
      playerName = prompt("Digite seu nome:") || "visitante";

      frases