<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Você quer sair?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Tela inicial -->
  <div class="container" id="dialogue">
    <p id="message"></p>
    <button id="exitBtn" onclick="handleClick()" style="display:none;">Sair</button>
  </div>

  <!-- Tela de alerta -->
  <div class="alerta" id="alerta" style="display: none;">
    <h1 id="alertTitle"></h1>
    <p id="alertText"></p>
  </div>

  <!-- Cena do susto -->
  <div class="scare" id="scare" style="display: none;">
    <img src="Copilot_20251014_160904.jpg.png" alt="Susto" />
    <audio id="screamSound">
      <source src="assets/audio/scary-scream-3-81274.mp3" type="audio/mpeg">
    </audio>
  </div>

  <script>
    let clickCount = 0;
    const messages = [
      "Você quer sair?",
      "Tem certeza que quer sair?",
      "Você ainda está aí...",
      "Última chance..."
    ];

    // Função de digitação
    function typeWriter(text, elementId, callback, speed = 50) {
      let i = 0;
      document.getElementById(elementId).innerHTML = "";
      function typing() {
        if (i < text.length) {
          document.getElementById(elementId).innerHTML += text.charAt(i);
          i++;
          setTimeout(typing, speed);
        } else if (callback) {
          callback();
        }
      }
      typing();
    }

    // Mostra alerta de vírus
    function showAlert() {
      document.getElementById("dialogue").style.display = "none";
      document.getElementById("alerta").style.display = "block";
      document.body.classList.add("flash");

      // Vibrar no celular
      if (navigator.vibrate) {
        navigator.vibrate([300, 200, 300, 200, 500]);
      }

      // Texto digitado no alerta
      typeWriter("⚠️ Alerta de Vírus ⚠️", "alertTitle", () => {
        typeWriter("Seu celular pode estar sendo rastreado ou invadido", "alertText", () => {
          setTimeout(showScare, 3000);
        }, 40);
      }, 40);
    }

    // Mostra o susto
    function showScare() {
      document.getElementById("alerta").style.display = "none";
      document.getElementById("scare").style.display = "block";
      document.body.classList.remove("flash");

      const sound = document.getElementById("screamSound");
      sound.play();
    }

    // Controle do botão
    function handleClick() {
      clickCount++;
      if (clickCount < 4) {
        document.getElementById("exitBtn").style.display = "none";
        typeWriter(messages[clickCount], "message", () => {
          document.getElementById("exitBtn").style.display = "inline-block";
        });
      } else {
        showAlert();
      }
    }

    // Susto automático após 10s sem interação
    let scareTimeout = setTimeout(showAlert, 10000);
    function resetTimer() {
      clearTimeout(scareTimeout);
      scareTimeout = setTimeout(showAlert, 10000);
    }

    window.onload = () => {
      typeWriter(messages[0], "message", () => {
        document.getElementById("exitBtn").style.display = "inline-block";
      });
      document.addEventListener("mousemove", resetTimer);
      document.addEventListener("keydown", resetTimer);
      document.addEventListener("click", resetTimer);
    };
  </script>
</body>
</html>
